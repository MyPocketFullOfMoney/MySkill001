# Linux

<!-- TOC -->

- [Linux](#linux)
  - [VIM编辑器](#vim编辑器)
    - [命令模式常用指令](#命令模式常用指令)
  - [awk命令](#awk命令)
  - [ls指令](#ls指令)
  - [tar指令](#tar指令)
  - [unzip指令](#unzip指令)
  - [df指令](#df指令)
  - [du指令](#du指令)
  - [find命令](#find命令)
  - [grep命令](#grep命令)
  - [top命令](#top命令)
  - [Linux中的通配符](#linux中的通配符)

<!-- /TOC -->

## VIM编辑器

vi/vim有三种模式：命令模式、输入模式和底线命令模式

### 命令模式常用指令

- /[字符串]，输入符号/，然后输入对应的字符串，即可在文本中查找对应的字符串。
- n:下一个查找的字符串
- N：上一个查找的字符串
- w:移动光标到下一个单词
- u:撤销，返回上一步动作
- yy：复制一行
- dd：删除一行
- yw：复制一个单词
- dw：删除一个单词
- p：粘贴
- G：跳转到文件尾
- 0：光标跳转到当前行开头处

## awk命令

AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。

每行按空格或TAB分割，输出文本1、4项  
`awk '{print $1,$4}' filename`

利用内置变量指定分割符  
以'|'为分割符划分文件内容，输出文本1、4项  
`awk -v FS='|' '{print $1,$4}' filename`

**思路!**

1. 总结出工作中常用的命令
2. 补充完整命令参数和使用方法

**买东西要按需购买，不知道学习能不能按需学习- -!**

## ls指令

按创建时间倒序显示文件  
`ls -rt`

## tar指令

存在目录test  
打包并压缩目录test  
`tar -czvf test.tar.gz test`

显示打包文件的内容，不解压  
`tar -tvf test.tar.gz`

解压打包文件  
`tar -xzvf test.tar.gz`  
解压打包文件到指定的目录  
`tar -xzvf test.tar.gz -C /user/tmp`  
>参数解析  
-z 通过gzip指令处理备份文件  
-v 显示指令执行过程  
-f 指定备份文件  
-c 创建新的备份文件（打包）  
-C 切换到指定的目录  
-t 列出备份文件的内容  
-x 从备份文件中还原文件（解压）

## unzip指令

存在压缩包`test.zip`  
查看压缩包内容  
`unzip -l test.zip`  
显示压缩的详细信息
`unzip -v test.zip`  
直接解压  
`unzip test.zip`  
指定目录解压  
`unzip -d /user/tmp test.zip`  

## df指令

用于Linux系统上的文件系统磁盘使用情况  
常用`df -h`  

## du指令

用于显示目录或者文件的大小
常用`du -h`

## find命令

用来在指定目录下查找文件

应用场景一：C++程序缺少一个名叫`misss.so`的库。

因为程序一般都是当前用户执行，所以利用find指令递归搜索家目录下的所有文件。

`find ~ -name miss.so`

应用场景二：查找用户目录及子目录，前30分钟内被修改过的文件。

`find ~ -cmin -30`

注：选项`-cmin`和`-mmin`的区别。

**`-cmin`指文件被修改，即权限的改变，大小等**;

**`-mmin`指文件内容被修改**。

应用场景三：查找用户目录及子目录，所有.log文件，并删除。

`find ~ -name *.log -exec rm {} \`

## grep命令

`grep -C 5 -n [关键词] 目标文件`查看关键词上下5行内容并显示行号。

查看文件内容的过程中可能存在重复的内容，利用行号标识内容是否重复。

## top命令

top命令用户监控机器硬件资源的使用情况。

一般在服务端做性能测试，都需要利用top命令监控系统资源。

参数：

- -p:显示指定进程号，系统资源使用情况。
- -b:信息打印到屏幕
- -n:统计次数，达到次数top程序会退出
- -d:隔多少秒统计一次

**应用场景一：程序进程号为1234，每1秒钟统计一次，只统计10次**。

`top -p 123456 -d 1 -n 10`

**应用场景二：程序进程号为1234，结合Shell脚本，每1秒钟统计一次并输出到perf_info.txt文件**。

```Bash
while true
do
    top -p 123456 -b -n 1|grep 1234 >> perf_info.txt
done
```

## Linux中的通配符

- \* 匹配任意长度的字符，可以是0个
- ？ 匹配任意单个字符，必须是1个
- [] 匹配指定字符范围内的任意单个字符
- [a-Z] 表示所有大小写字母
- [a-z] 表示a,A,b,B...z,不包含
- [A-Z] 表示A,b,B...,z,Z,不包含a

>与正则表达式的语法不同，不要混肴！！！
