# 目录
<!-- TOC -->

- [目录](#目录)
  - [计算机网络体系结构](#计算机网络体系结构)
  - [应用层](#应用层)
  - [运输层](#运输层)
    - [TCP](#tcp)
    - [UDP](#udp)
  - [网际层](#网际层)

<!-- /TOC -->
## 计算机网络体系结构

OSI的七层协议体系结构概念清楚，理论也比较完整，但它既复杂又不实用。但它是**法律上的国际标准**。

TCP/IP是一个四层的体系结构，它包含应用层、运输层、网络层、网际层和网络接口层（用网际层这个名字是强调这一层是为了解决不同网络的互连问题）。TCP/IP协议在国际上得到广泛的应用，它是**事实上的国际标准**。

从实质上讲，TCP/IP只有最上面的三层，因为最下面的网络接口层并没有什么具体的内容。因此在学习计算机网络的原理时往往采取折中的办法，即综合OSI和TCP/IP的优点，采用一种只有五层协议的体系结构。

![计算机网络体系](https://note.youdao.com/yws/api/personal/file/WEBdf3bc32edd8761a10cd56505e6ee3d16?method=download&shareKey=a701c96981e013bccb43b48d437818d2)

- **应用层(application layer)**

  应用层的任务是**通过应用进程间的交互来完成特定网络应用**。  
  应用层协议定义的是**应用进程间通信和交互的规则**。这里的**进程**就是指主机中**正在运行的程序**。

  **应用层协议**：
  - 域名系统**DNS**
  - 超文本传送协议**HTTP**
  - 电子邮件传送协议**SMTP**
  - 邮件读取协议**POP3和IMAP**
  - 文件传送协议**FTP**、简单文件传送协议**TFTP**
  - 远程终端协议**TELNET**
  - 动态主机配置协议**DHCP**
  - 简单网络管理协议**SNMP**
  
  应用层交互的数据单元称为**报文（message）**。

- **运输层(transport layer)**

  运输层的任务就是负责向**两台主机中进程之间的通信**提供**通用的数据传输**服务。

  运输层主要使用以下两种协议：
  - **传输控制协议TCP(Transmission Control Protocol)**——提供面向连接的、**可靠的数据传输服务**，其数据传输的单位是**报文段(segment)**。
  - **用户数据报协议UDP(User Datagram Protocol)**——提高无连接的、**尽最大努力**(best-effort)的数据传输服务（不保证数据传输的可靠性），其数据传输的单位是**用户数据报**。

- **网络层**

  网络层负责为分组交换网上的不同**主机**提供通信服务。  
  在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送。在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫做**IP数据报**，简称为**数据报**。

  网络层主要协议：
  - 网际协议**IP**
  - 地址解析协议**ARP(Address Rseolution Protocol)**
  - 网际控制报文协议**ICMP(Internet Control Message Protocol)**
  - 网际组管理协议I**GMP(Internet Group Management Protocol)**

- **数据链路层**

  数据链路层简称为**链路层**。在两个相邻节点之间传送数据时，数据链路层将网络层交下来的IP数据报**组装成帧(framing)**,在两个相邻节点间的链路上传送**帧(frame)**。

  每一帧包括数据和必要的**控制信息**（如同步信息、地址信息、差错控制等）。

  在数据链路层中广泛使用**循环冗余检验CRC(Cyclic Redundancy Check)的检错技术**。

- **物理层**

  物理层所传数据的单位是**比特**。发送方发送1（或0）时，接收方应当收到1（或0）而不是0（或1）。

但在现实中，技术的发展并不是严格遵循OSI分层概念。有些应用程序可以直接使用**网际层（IP层）**，或甚至直接使用最下面的**网络接口层**。所以，TCP/IP体系结构可以表现为如下图所示。

![TCP/IP体系结构另一种表示方法](https://note.youdao.com/yws/api/personal/file/WEB568313145ce3dc86d4a1662d22b1415a?method=download&shareKey=e829ea64e621328d67bdfe76870136d1)

**PING(Packet InterNet Groper)是应用层直接使用网络层ICMP的一个例子**。  
它没有通过运输层的TCP或UDP。

PING命令执行后，机器会一连发出四个ICMP回送请求报文，如果服务器正常，它就会发回ICMP回送回答报文。

下图是Ping百度域名的实例，从图中可以看到，ICMP报文发送到了`14.215.177.39`服务器上，发送的、收到的和丢失的分组数分别为`4、4、0`，以及往返时间的最小值、最大值和平均值分别为`5、6、5`。

![Ping百度实例](https://note.youdao.com/yws/api/personal/file/WEB3bf5652206ab58cbe71250e366426e7c?method=download&shareKey=fe6e62bebe77e088f98ed8398b59efb7)

>返回结果中ping的域名并不是`www.baidu.com`，而是`www.a.shifen.com`。  
具体原因可参考[尝试Ping百度域后的思考](https://blog.csdn.net/wu_roc/article/details/77168426)

## 应用层

## 运输层

### TCP

### UDP

## 网际层
